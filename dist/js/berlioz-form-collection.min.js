!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):t.BerliozCollection=e(t.jQuery)}(this,function(t){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r,e;return t=t&&t.hasOwnProperty("default")?t.default:t,r=t,e=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.target=r(t)}var t,e,o;return t=n,o=[{key:"_jQueryInterface",value:function(t,e){this.each(function(){switch("object"===a(r(this).data("collection-object"))&&r(this).data("collection-object")instanceof n||r(this).data("collection-object",new n(this)),t){case"add":r(this).data("collection-object").addElement();break;case"delete":r(this).data("collection-object").deleteElement(e)}})}}],(e=[{key:"addElement",value:function(){var t=this.target.find("[data-collection-key]").length,e=r('<div data-collection-key="'+t+'"></div>'),n=this.target.data("prototype").replace(/___name___/g,t);e.append(r(n)),this.target.append(e)}},{key:"deleteElement",value:function(t){(t=r(t)).data("collection-key")||(t=t.parents("[data-collection-key]"));var e=r(t.parents("[data-collection]"));t.remove();var o=e.data("collection"),a=this.escapeRegExp(e.data("collection")),i=e.attr("id");r("[data-collection-key]",e).each(function(n){r(this).attr("data-collection-key",n),r("input, select, textarea, label",this).each(function(){var t=new RegExp(i+"_\\d+"),e=new RegExp(a+"\\[\\d+");r(this)[0].hasAttribute("for")&&r(this).attr("for",r(this).attr("for").replace(t,i+"_"+n)),r(this)[0].hasAttribute("name")&&r(this).attr("name",r(this).attr("name").replace(e,o+"["+n)),r(this)[0].hasAttribute("id")&&r(this).attr("id",r(this).attr("id").replace(t,i+"_"+n))})})}},{key:"escapeRegExp",value:function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}])&&i(t.prototype,e),o&&i(t,o),n}(),r.fn.berliozCollection=e._jQueryInterface,void(r.fn.berliozCollection.noConflict=function(){return e._jQueryInterface})});